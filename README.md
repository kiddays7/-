# -Java EE 之网上商城

1.1 前台需求分析：

1.1.1 用户模块：
  注册：
    1.前台js的校验：
    2.使用AJAX完成对用户名异步校验：
    3.前台Struts2校验：
    4.验证码：
    5.发送激活邮件：
    6.将用户信息存入到数据库中：
  激活：
    1.点击链接完成激活：
      * 根据激活码，查询数据库中是否有该用户：
        * 如果有：激活。（将激活码字段清空。）
      * 修改用户的状态：
  登录：
    1.输入用户名和密码：（数据校验。）
    2.用户名和密码都正确，同时用户状态必须是激活状态：
  退出：
    1.销毁session。
    
1.1.2 一级分类模块：
  查询一级分类：
    1.查询一级分类：
      * 将一级分类存入到session范围。（每个页面都有一级分类的数据）
  查询某个一级分类：
    1.查询所有一级分类：
      * 同时查询到每个一级分类下所属的二级分类
    2.查询该分类下所有的商品：
      * 带分页显示：
     
1.1.3 商品模块：
  查询热门商品
    1.限制10个
  查询最新商品
    1.限制10个
  查询某个分类商品
    1.根据分类的ID查询商品
  查询某个二级分类商品
    1.根据二级分类的ID进行查查询商品：
  查询某个商品信息：
    1.根据商品ID查询某个商品：
  
1.1.4 购物模块
  添加到购物车：
    1.将商品信息添加到购物车中：
  从购物车中移除商品：
    1.将商品信息移除购物车：
  清空购物车
    1.将所有的商品信息从购物车中移除
 
1.1.5 订单模块
  生成订单：
    1.将购物车中的信息存入到数据库中（生成订单）。
      * 清空购物车：
  为订单付款
    1.在线支付功能
    2.修改订单状态
    3.修改订单信息：（收货人，联系方式，收获地址）
  查询我的订单
    1.根据用户ID查询订单。
  查询某个订单详情：
    1.根据订单ID进行查询：

1.2 后台需求分析：
  1.2.1 用户模块
    添加用户：
      1.添加用户到数据库
    修改用户：
      1.修改用户到数据库
    删除用户：
      1.删除用户
    查询用户：
      1.查询用户
  1.2.2 一级分类：
    添加一级分类：
      1.添加一级分类：
    修改一级分类：
      1.修改一级分类：
    删除一级分类：
      1.删除一级分类：
        * 级联删除二级分类：
    查询一级分类：
      1.查询一级分类：
  1.2.3 二级分类：
    添加二级分类：
      1.二级分类需要有所属的一级分类：
    修改二级分类：
      1.修改二级分类所属的一级分类：
    删除二级分类：
      1.删除二级分类：
    查询二级分类：
      1.查询二级分类（带分页）

  1.2.4 商品模块：
    添加商品：
      1.添加商品所属二级分类：
      2.上传商品图片： 
    修改商品：
      1.修改商品二级分类：
      2.修改商品图片：
    删除商品：
      1.删除商品：
    查询商品：
      1.商品查询：（带分页）
  1.2.5 订单模块：
    查询订单：
      1.查询所有订单：（带分页）
        * 异步加载订单项：

1.3 页面设计：

1.4 数据库设计：
  用户表：
    * 用户id：
    * 用户名：
    * 密码：
    * 真实姓名：
    * 邮箱：
    * 地址：
    * 电话：
    * 用户状态： 0未激活  1已激活
    * 激活码：
  一级分类：
    * 一级分类id：
    * 一级分类名称：
  二级分类：
    * 二级分类id：
    * 二级分类名称：
    * 一级分类id（外键指向一级分类主键id）：（实体间的联系：n的要指向1的）
  商品表：
    * 商品id：
    * 商品名称：
    * 商品商城价格：
    * 商品市场价格：
    * 商品描述：
    * 商品图片；（路径）
    * 二级分类id（外键指向二级分类主键id）：
  订单表：
    * 订单id：
    * 订单时间：
    * 订单金额：
    * 订单状态：
    * 订单地址：
    * 订单电话：
    * 订单收货人：
    * 用户id（外键指向用户表的主键id）：
  订单项表：（实体间的联系：多对多的关系需要建一个中间表）（需要参与到业务逻辑中）
    * 主键id：
    * 商品id：
    * 订单id：
    * 数量：
    * 小计：
  后台用户表：
    * 用户名：
    * 密码：


